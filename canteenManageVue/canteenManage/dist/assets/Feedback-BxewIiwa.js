/* empty css                *//* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                *//* empty css               *//* empty css              */import{r as c}from"./request-B1eisu_F.js";import{r as T,s as q,c as g,a as u,b as o,w as a,v as D,N as F,E as i,x as b,y as U,z as $,A as J,B as P,C as I,o as _,g as m,H as M,J as O,L as A}from"./index-BMVJ4Z_q.js";const H={class:"card"},L={class:"card",style:{"margin-bottom":"10px"}},j={class:"card",style:{"margin-bottom":"10px"}},G={key:0,class:"card"},K={class:"dialog-footer"},de={__name:"Feedback",setup(Q){const t=T({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:5,total:0,title:null,content:null,ids:[],rules:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}),f=q(),w=l=>{t.form=JSON.parse(JSON.stringify(l)),t.formVisible=!0},y=l=>{t.ids=l.map(e=>e.id)},d=()=>{c.get("/feedback/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,title:t.title,content:t.content}}).then(l=>{var e,r;l.code==="200"?(t.tableData=((e=l.data)==null?void 0:e.list)||[],t.total=(r=l.data)==null?void 0:r.total):i.error(l.msg)})};d();const v=()=>{c.put("/feedback/update",t.form).then(l=>{l.code==="200"?(i.success("更新成功"),d(),t.formVisible=!1):i.error(l.msg)})},k=l=>{b.confirm("是否删除该反馈意见信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(e=>{c.delete(`/feedback/delete/${l.id}`).then(r=>{r.code==="200"?(i.success("删除成功"),d()):i.error(r.msg)}).catch(r=>{i.error(r)})})},V=()=>{if(!t.ids.length){i.warning("请选择要删除的反馈意见信息");return}b.confirm("是否删除该反馈意见信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(l=>{c.delete("/feedback/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(i.success("删除成功"),d()):i.error(e.msg)}).catch(e=>{i.error(e)})})},x=()=>{t.title=null,t.content=null,d()},h=()=>{f.value.validate(l=>{l&&(t.form.id?v():add())})};return(l,e)=>{const r=U,p=$,s=M,C=J,E=P,N=O,S=A,z=I;return _(),g(F,null,[u("div",null,[u("div",H,[o(r,{modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=n=>t.title=n),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入反馈标题"},null,8,["modelValue"]),o(p,{type:"info",plain:"",onClick:d},{default:a(()=>e[5]||(e[5]=[m("查询")])),_:1}),o(p,{type:"info",style:{margin:"0 10px"},plain:"",onClick:x},{default:a(()=>e[6]||(e[6]=[m("重置")])),_:1})]),u("div",L,[o(p,{type:"danger",plain:"",onClick:V},{default:a(()=>e[7]||(e[7]=[m("批量删除")])),_:1})]),u("div",j,[o(C,{stripe:"",data:t.tableData,border:"",style:{width:"100%"},onSelectionChange:y},{default:a(()=>[o(s,{type:"selection",width:"55","header-align":"center",align:"center"}),o(s,{prop:"title",label:"反馈标题","show-overflow-tooltip":""}),o(s,{prop:"question",label:"反馈问题","show-overflow-tooltip":""}),o(s,{prop:"idea",label:"想法","show-overflow-tooltip":""}),o(s,{prop:"studentName",label:"学生姓名","show-overflow-tooltip":""}),o(s,{prop:"createTime",label:"反馈时间",width:"180px"}),o(s,{prop:"content",label:"回复内容","show-overflow-tooltip":""}),o(s,{prop:"replyTime",label:"回复时间",width:"180px"}),o(s,{label:"操作",width:"180"},{default:a(n=>[o(p,{type:"success",plain:"",onClick:B=>w(n.row)},{default:a(()=>e[8]||(e[8]=[m("回复")])),_:2},1032,["onClick"]),o(p,{type:"danger",plain:"",onClick:B=>k(n.row)},{default:a(()=>e[9]||(e[9]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(_(),g("div",G,[o(E,{onCurrentChange:d,background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[1]||(e[1]=n=>t.pageNum=n),total:t.total},null,8,["page-size","current-page","total"])])):D("",!0)]),o(z,{title:"反馈回复",modelValue:t.formVisible,"onUpdate:modelValue":e[4]||(e[4]=n=>t.formVisible=n),width:"30%"},{footer:a(()=>[u("div",K,[o(p,{onClick:e[3]||(e[3]=n=>t.formVisible=!1)},{default:a(()=>e[10]||(e[10]=[m("取消")])),_:1}),o(p,{type:"primary",onClick:h},{default:a(()=>e[11]||(e[11]=[m(" 确定 ")])),_:1})])]),default:a(()=>[o(S,{ref_key:"form",ref:f,model:t.form,"label-width":"80px",style:{padding:"20px"}},{default:a(()=>[o(N,{prop:"content",label:"回复内容"},{default:a(()=>[o(r,{type:"textarea",rows:"4",modelValue:t.form.content,"onUpdate:modelValue":e[2]||(e[2]=n=>t.form.content=n),placeholder:"请输入公告内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}};export{de as default};
