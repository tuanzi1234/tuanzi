/* empty css                *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as m}from"./request-BisGCTbQ.js";import{r as k,c as g,a as c,b as a,w as r,v as V,E as i,x as _,y as z,z as B,A as S,B as D,o as h,g as u,u as f,D as I,G as q,H as P,k as T,I as j}from"./index-ByI2rrOB.js";/* empty css                */const H={class:"card"},M={class:"card",style:{"margin-bottom":"10px"}},U={class:"card",style:{"margin-bottom":"10px"}},$={style:{display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%"}},A={key:0,class:"card"},oe={__name:"History",setup(G){const t=k({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:5,total:0,studentName:null,ids:[],rules:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}),b=o=>{t.ids=o.map(e=>e.id)},s=()=>{m.get("/history/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,studentName:t.studentName}}).then(o=>{var e,l;o.code==="200"?(t.tableData=((e=o.data)==null?void 0:e.list)||[],t.total=(l=o.data)==null?void 0:l.total):i.error(o.msg)})};s();const y=o=>{_.confirm("是否删除该系统公告信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(e=>{m.delete(`/history/delete/${o.id}`).then(l=>{l.code==="200"?(i.success("删除成功"),s()):i.error(l.msg)}).catch(l=>{i.error(l)})})},w=()=>{if(!t.ids.length){i.warning("请选择要删除的系统公告信息");return}_.confirm("是否删除该系统公告信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(o=>{m.delete("/history/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(i.success("删除成功"),s()):i.error(e.msg)}).catch(e=>{i.error(e)})})},x=()=>{t.studentName=null,s()};return(o,e)=>{const l=z,p=B,d=P,N=T,v=j,C=S,E=D;return h(),g("div",null,[c("div",H,[a(l,{modelValue:t.studentName,"onUpdate:modelValue":e[0]||(e[0]=n=>t.studentName=n),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入学生姓名"},null,8,["modelValue"]),a(p,{type:"info",plain:"",onClick:s},{default:r(()=>e[2]||(e[2]=[u("查询")])),_:1}),a(p,{type:"info",style:{margin:"0 10px"},plain:"",onClick:x},{default:r(()=>e[3]||(e[3]=[u("重置")])),_:1})]),c("div",M,[a(p,{type:"danger",plain:"",onClick:w},{default:r(()=>e[4]||(e[4]=[u("批量删除")])),_:1})]),c("div",U,[a(C,{stripe:"",data:t.tableData,border:"",style:{width:"100%"},onSelectionChange:b},{default:r(()=>[a(d,{type:"selection",width:"55","header-align":"center",align:"center"}),a(d,{prop:"studentName",label:"学生姓名"}),a(d,{prop:"dish.name",label:"菜品名称"}),a(d,{prop:"dish.img",label:"菜品图片"},{default:r(n=>[a(v,{src:n.row.dish.img,"preview-src-list":[n.row.dish.img],fit:"cover",style:{width:"50px",height:"50px","object-fit":"cover"},"preview-teleported":""},{error:r(()=>[c("div",$,[a(N,null,{default:r(()=>[a(f(I))]),_:1})])]),_:2},1032,["src","preview-src-list"])]),_:1}),a(d,{prop:"time",label:"浏览时间"}),a(d,{label:"操作",width:"180"},{default:r(n=>[a(p,{type:"danger",circle:"",icon:f(q),onClick:F=>y(n.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(h(),g("div",A,[a(E,{onCurrentChange:s,background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[1]||(e[1]=n=>t.pageNum=n),total:t.total},null,8,["page-size","current-page","total"])])):V("",!0)])}}};export{oe as default};
