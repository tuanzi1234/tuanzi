/* empty css                *//* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                *//* empty css               *//* empty css              */import{r as p}from"./request-D4_zAD7W.js";import{r as F,s as J,c as _,a as c,b as o,w as n,v as P,E as r,x as y,y as T,z as q,A,B as I,C as M,o as b,g as m,u as V,F as O,G as R,H as G,J as H,L}from"./index-CnZojLtj.js";const j={class:"card"},K={class:"card",style:{"margin-bottom":"10px"}},Q={class:"card",style:{"margin-bottom":"10px"}},W={key:0,class:"card"},X={class:"dialog-footer"},ce={__name:"Category",setup(Y){const e=F({formVisible:!1,form:{title:"",content:""},tableData:[],pageNum:1,pageSize:10,total:0,title:null,content:null,ids:[],rules:{title:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}),f=J(),C=()=>{e.form={},e.formVisible=!0},x=()=>{p.post("/category/add",e.form).then(l=>{l.code==="200"?(r.success("添加成功"),s(),e.formVisible=!1):r.error(l.msg)})},k=l=>{e.form=JSON.parse(JSON.stringify(l)),e.formVisible=!0},v=l=>{e.ids=l.map(t=>t.id)},s=()=>{p.get("/category/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,title:e.title,content:e.content}}).then(l=>{var t,i;l.code==="200"?(e.tableData=((t=l.data)==null?void 0:t.list)||[],e.total=(i=l.data)==null?void 0:i.total):r.error(l.msg)})};s();const w=()=>{p.put("/category/update",e.form).then(l=>{l.code==="200"?(r.success("更新成功"),s(),e.formVisible=!1):r.error(l.msg)})},h=l=>{y.confirm("是否删除该系统公告信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(t=>{p.delete(`/category/delete/${l.id}`).then(i=>{i.code==="200"?(r.success("删除成功"),s()):r.error(i.msg)}).catch(i=>{r.error(i)})})},E=()=>{if(!e.ids.length){r.warning("请选择要删除的系统公告信息");return}y.confirm("是否删除该系统公告信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(l=>{p.delete("/category/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(r.success("删除成功"),s()):r.error(t.msg)}).catch(t=>{r.error(t)})})},N=()=>{f.value.validate(l=>{l&&(e.form.id?w():x())})},S=()=>{e.title=null,e.content=null,s()};return(l,t)=>{const i=T,d=q,u=G,z=A,B=I,g=H,U=L,D=M;return b(),_("div",null,[c("div",j,[o(i,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.title=a),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入分类名称"},null,8,["modelValue"]),o(d,{type:"info",plain:"",onClick:s},{default:n(()=>t[6]||(t[6]=[m("查询")])),_:1}),o(d,{type:"info",style:{margin:"0 10px"},plain:"",onClick:S},{default:n(()=>t[7]||(t[7]=[m("重置")])),_:1})]),c("div",K,[o(d,{type:"primary",plain:"",onClick:C},{default:n(()=>t[8]||(t[8]=[m("新增")])),_:1}),o(d,{type:"danger",plain:"",onClick:E},{default:n(()=>t[9]||(t[9]=[m("批量删除")])),_:1})]),c("div",Q,[o(z,{stripe:"",data:e.tableData,border:"",style:{width:"100%"},onSelectionChange:v},{default:n(()=>[o(u,{type:"selection",width:"55","header-align":"center",align:"center"}),o(u,{prop:"title",label:"分类名称"}),o(u,{prop:"content",label:"分类描述"}),o(u,{label:"操作",width:"180"},{default:n(a=>[o(d,{type:"primary",circle:"",icon:V(O),onClick:$=>k(a.row)},null,8,["icon","onClick"]),o(d,{type:"danger",circle:"",icon:V(R),onClick:$=>h(a.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(b(),_("div",W,[o(B,{onCurrentChange:s,background:"",layout:"total, prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=a=>e.pageNum=a),total:e.total},null,8,["page-size","current-page","total"])])):P("",!0),o(D,{title:"菜品分类",modelValue:e.formVisible,"onUpdate:modelValue":t[5]||(t[5]=a=>e.formVisible=a),width:"30%"},{footer:n(()=>[c("div",X,[o(d,{onClick:t[4]||(t[4]=a=>e.formVisible=!1)},{default:n(()=>t[10]||(t[10]=[m("取消")])),_:1}),o(d,{type:"primary",onClick:N},{default:n(()=>t[11]||(t[11]=[m(" 确定 ")])),_:1})])]),default:n(()=>[o(U,{ref_key:"formRef",ref:f,rules:e.rules,model:e.form,"label-width":"80px",style:{padding:"20px"}},{default:n(()=>[o(g,{prop:"title",label:"分类名称"},{default:n(()=>[o(i,{modelValue:e.form.title,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.title=a),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),o(g,{prop:"content",label:"分类描述"},{default:n(()=>[o(i,{type:"textarea",rows:"4",modelValue:e.form.content,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.content=a),placeholder:"请输入分类描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{ce as default};
