/* empty css                *//* empty css                    *//* empty css                *//* empty css                  *//* empty css              *//* empty css                     *//* empty css                     *//* empty css            *//* empty css               */import{r as m}from"./request-DjFgx_mW.js";/* empty css                */import{r as E,c as C,a,t as _,b as e,w as s,E as l,z as k,A as V,o as h,g as u,P as D,v as B,x as N,H as S,j,k as P,I as T,a5 as z}from"./index-5FTUK4ks.js";const A={style:{width:"60%",margin:"20px auto"}},F={class:"card"},M={style:{display:"flex","align-items":"center","padding-bottom":"10px","border-bottom":"1px solid #ccc"}},O={style:{flex:"1","font-size":"20px"}},U={style:{width:"100px"}},$={style:{padding:"10px"}},q={style:{display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%"}},H={style:{color:"red","font-weight":"bold"}},se={__name:"DishItem",setup(J){const i=E({user:JSON.parse(localStorage.getItem("project-user")||"{}"),dishItemData:[],dishes:[]}),c=()=>{m.get("/dishItem/selectAll",{params:{studentId:i.user.id}}).then(t=>{t.code==="200"?i.dishItemData=t.data:l.error(t.msg)})};c();const g=t=>{N.confirm("是否移除该点单信息?","移除确认",{type:"warning"}).then(d=>{m.delete(`/dishItem/delete/${t.id}`).then(r=>{r.code==="200"?(l.success("移除成功"),c()):l.error(r.msg)}).catch(r=>{l.error(r)})})},f=()=>{if(!i.dishes.length){l.warning("请选择要下单的菜品");return}m.post("/orders/create",i.dishes).then(t=>{t.code==="200"?(l.success("下单成功"),c()):l.error(t.msg)})},w=t=>{i.dishes=t};return(t,d)=>{const r=k,n=S,x=j("PictureFilled"),b=P,y=T,v=z,I=V;return h(),C("div",A,[a("div",F,[a("div",M,[a("div",O,"全部菜品 ("+_(i.dishItemData.length)+")",1),a("div",U,[e(r,{onClick:f,type:"danger",style:{"border-radius":"5px"}},{default:s(()=>d[0]||(d[0]=[u("下单")])),_:1})])]),a("div",$,[e(I,{stripe:"",data:i.dishItemData,border:"",style:{width:"100%"},onSelectionChange:w},{default:s(()=>[e(n,{type:"selection",width:"55","header-align":"center",align:"center"}),e(n,{prop:"dish.img",label:"菜品图片",width:"90px"},{default:s(o=>[o.row.dish.img?(h(),D(y,{key:0,src:o.row.dish.img,"preview-src-list":[o.row.dish.img],fit:"cover",style:{width:"50px",height:"50px","object-fit":"cover"},"preview-teleported":""},{error:s(()=>[a("div",q,[e(b,null,{default:s(()=>[e(x)]),_:1})])]),_:2},1032,["src","preview-src-list"])):B("",!0)]),_:1}),e(n,{prop:"dish.name",label:"菜品名称"}),e(n,{prop:"dish.price",label:"菜品价格"},{default:s(o=>[a("span",H,"￥ "+_(o.row.dish.price)+"/份",1)]),_:1}),e(n,{prop:"num",label:"菜品份数"},{default:s(o=>[e(v,{modelValue:o.row.num,"onUpdate:modelValue":p=>o.row.num=p,min:1,max:o.row.dish.num},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1}),e(n,{label:"操作",width:"180"},{default:s(o=>[e(r,{type:"danger",onClick:p=>g(o.row)},{default:s(()=>d[1]||(d[1]=[u("移除点单")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])])}}};export{se as default};
