/* empty css                *//* empty css                  *//* empty css               *//* empty css              *//* empty css                 */import{r as h}from"./request-BisGCTbQ.js";import{_ as y,r as x,s as E,c as d,b as t,w as l,L as U,o as m,u as N,v as I,a as k,g as w,E as p,K as S,J as q,y as B,z as C}from"./index-ByI2rrOB.js";const J={style:{width:"50%"},class:"card"},j=["src"],A={style:{"text-align":"center"}},F={__name:"Person",emits:["updateUser"],setup(M,{emit:i}){const c="http://localhost:9090",e=x({user:JSON.parse(localStorage.getItem("project-user")||"{}"),rules:{name:[{required:!0,message:"请输入账号",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}]}}),n=E(),_=o=>{e.user.avatar=o.data},f=i,g=()=>{n.value.validate(o=>{o&&e.user.role==="ADMIN"&&h.put("/admin/update",e.user).then(a=>{a.code==="200"?(p.success("更新成功"),localStorage.setItem("project-user",JSON.stringify(e.user)),f("updateUser")):p.error(a.msg)})})};return(o,a)=>{const V=S,s=q,u=B,b=C,v=U;return m(),d("div",J,[t(v,{ref_key:"user",ref:n,model:e.user,rules:e.rules,"label-width":"70px",style:{padding:"20px"}},{default:l(()=>[t(s,{prop:"avatar",label:"头像"},{default:l(()=>[t(V,{class:"avatar-uploader",action:N(c)+"/files/upload","on-success":_,"show-file-list":!1},{default:l(()=>[e.user.avatar?(m(),d("img",{key:0,src:e.user.avatar,class:"avatar"},null,8,j)):I("",!0)]),_:1},8,["action"])]),_:1}),t(s,{prop:"username",label:"账号"},{default:l(()=>[t(u,{disabled:"",modelValue:e.user.username,"onUpdate:modelValue":a[0]||(a[0]=r=>e.user.username=r),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),t(s,{prop:"name",label:"姓名"},{default:l(()=>[t(u,{modelValue:e.user.name,"onUpdate:modelValue":a[1]||(a[1]=r=>e.user.name=r),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),t(s,{prop:"phone",label:"电话"},{default:l(()=>[t(u,{modelValue:e.user.phone,"onUpdate:modelValue":a[2]||(a[2]=r=>e.user.phone=r),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),t(s,{prop:"email",label:"邮箱"},{default:l(()=>[t(u,{modelValue:e.user.email,"onUpdate:modelValue":a[3]||(a[3]=r=>e.user.email=r),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),k("div",A,[t(b,{type:"primary",onClick:g},{default:l(()=>a[4]||(a[4]=[w("保存")])),_:1})])]),_:1},8,["model","rules"])])}}},$=y(F,[["__scopeId","data-v-e758ecef"]]);export{$ as default};
