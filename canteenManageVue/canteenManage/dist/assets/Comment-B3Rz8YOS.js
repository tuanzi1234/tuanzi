/* empty css                *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                *//* empty css             *//* empty css                     *//* empty css               *//* empty css              */import{r as u}from"./request-cmqZYDHD.js";import{r as z,c as _,a as p,b as o,w as a,v as f,E as s,x as w,y as I,z as D,A as U,B as P,o as g,g as m,P as T,u as b,D as $,t as x,G as j,H as M,k as q,I as A,$ as G}from"./index-SmzkdM8_.js";/* empty css                */const H={class:"card"},R={class:"card",style:{"margin-bottom":"10px"}},F={class:"card",style:{"margin-bottom":"10px"}},J={style:{display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%"}},K={style:{color:"red","font-weight":"bold"}},L={key:0,class:"card"},de={__name:"Comment",setup(O){const t=z({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:5,total:0,orderNo:null,dishName:null,ids:[]}),y=r=>{t.ids=r.map(e=>e.id)},d=()=>{u.get("/ordersItem/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,orderNo:t.orderNo,content:t.content,dishName:t.dishName}}).then(r=>{var e,n;r.code==="200"?(t.tableData=((e=r.data)==null?void 0:e.list)||[],t.total=(n=r.data)==null?void 0:n.total):s.error(r.msg)})};d();const N=r=>{w.confirm("是否删除该学生评价信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(e=>{u.delete(`/ordersItem/delete/${r.id}`).then(n=>{n.code==="200"?(s.success("删除成功"),d()):s.error(n.msg)}).catch(n=>{s.error(n)})})},v=()=>{if(!t.ids.length){s.warning("请选择要删除的学生评价信息");return}w.confirm("是否删除该学生评价信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(r=>{u.delete("/ordersItem/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(s.success("删除成功"),d()):s.error(e.msg)}).catch(e=>{s.error(e)})})},V=()=>{t.orderNo=null,t.dishName=null,d()};return(r,e)=>{const n=I,c=D,i=M,C=q,k=A,E=G,S=U,B=P;return g(),_("div",null,[p("div",H,[o(n,{modelValue:t.orderNo,"onUpdate:modelValue":e[0]||(e[0]=l=>t.orderNo=l),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入订单编号"},null,8,["modelValue"]),o(n,{modelValue:t.dishName,"onUpdate:modelValue":e[1]||(e[1]=l=>t.dishName=l),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入菜品名称"},null,8,["modelValue"]),o(c,{type:"info",plain:"",onClick:d},{default:a(()=>e[3]||(e[3]=[m("查询")])),_:1}),o(c,{type:"info",style:{margin:"0 10px"},plain:"",onClick:V},{default:a(()=>e[4]||(e[4]=[m("重置")])),_:1})]),p("div",R,[o(c,{type:"danger",plain:"",onClick:v},{default:a(()=>e[5]||(e[5]=[m("批量删除")])),_:1})]),p("div",F,[o(S,{stripe:"",data:t.tableData,border:"",style:{width:"100%"},onSelectionChange:y},{default:a(()=>[o(i,{type:"selection",width:"55","header-align":"center",align:"center"}),o(i,{prop:"orderNo",label:"订单编号"}),o(i,{prop:"dish.name",label:"菜品名称",width:"150px","show-overflow-tooltip":""}),o(i,{prop:"dish.img",label:"图片",width:"100px"},{default:a(l=>[l.row.dish.img?(g(),T(k,{key:0,src:l.row.dish.img,"preview-src-list":[l.row.dish.img],fit:"cover",style:{width:"50px",height:"50px","object-fit":"cover"},"preview-teleported":""},{error:a(()=>[p("div",J,[o(C,null,{default:a(()=>[o(b($))]),_:1})])]),_:2},1032,["src","preview-src-list"])):f("",!0)]),_:1}),o(i,{prop:"num",label:"下单份数",width:"100px"},{default:a(l=>[m(" x"+x(l.row.num),1)]),_:1}),o(i,{prop:"dish.price",label:"价格",width:"100px"},{default:a(l=>[p("span",K,"￥ "+x(l.row.dish.price),1)]),_:1}),o(i,{prop:"score",label:"评分",width:"180px"},{default:a(l=>[o(E,{modelValue:l.row.score,"onUpdate:modelValue":h=>l.row.score=h,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value} 分"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(i,{prop:"comment",label:"评价内容","show-overflow-tooltip":""}),o(i,{prop:"time",label:"评价时间",width:"180px"}),o(i,{label:"操作",width:"180"},{default:a(l=>[o(c,{type:"danger",circle:"",icon:b(j),onClick:h=>N(l.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(g(),_("div",L,[o(B,{onCurrentChange:d,background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[2]||(e[2]=l=>t.pageNum=l),total:t.total},null,8,["page-size","current-page","total"])])):f("",!0)])}}};export{de as default};
