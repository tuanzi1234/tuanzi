/* empty css                *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as m}from"./request-DjFgx_mW.js";import{r as k,c as g,a as p,b as a,w as r,v as V,E as i,x as _,y as z,z as B,A as S,B as D,o as f,g as u,u as h,D as I,G as q,H as P,k as T,I as j}from"./index-5FTUK4ks.js";/* empty css                */const M={class:"card"},U={class:"card",style:{"margin-bottom":"10px"}},$={class:"card",style:{"margin-bottom":"10px"}},A={style:{display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%"}},G={key:0,class:"card"},le={__name:"Collect",setup(H){const t=k({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:5,total:0,studentName:null,ids:[],rules:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}),b=l=>{t.ids=l.map(e=>e.id)},s=()=>{m.get("/collect/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,studentName:t.studentName}}).then(l=>{var e,o;l.code==="200"?(t.tableData=((e=l.data)==null?void 0:e.list)||[],t.total=(o=l.data)==null?void 0:o.total):i.error(l.msg)})};s();const y=l=>{_.confirm("是否删除该收藏记录信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(e=>{m.delete(`/collect/delete/${l.id}`).then(o=>{o.code==="200"?(i.success("删除成功"),s()):i.error(o.msg)}).catch(o=>{i.error(o)})})},w=()=>{if(!t.ids.length){i.warning("请选择要删除的收藏记录信息");return}_.confirm("是否删除该收藏记录信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(l=>{m.delete("/collect/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(i.success("删除成功"),s()):i.error(e.msg)}).catch(e=>{i.error(e)})})},x=()=>{t.studentName=null,s()};return(l,e)=>{const o=z,c=B,d=P,N=T,v=j,C=S,E=D;return f(),g("div",null,[p("div",M,[a(o,{modelValue:t.studentName,"onUpdate:modelValue":e[0]||(e[0]=n=>t.studentName=n),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入学生姓名"},null,8,["modelValue"]),a(c,{type:"info",plain:"",onClick:s},{default:r(()=>e[2]||(e[2]=[u("查询")])),_:1}),a(c,{type:"info",style:{margin:"0 10px"},plain:"",onClick:x},{default:r(()=>e[3]||(e[3]=[u("重置")])),_:1})]),p("div",U,[a(c,{type:"danger",plain:"",onClick:w},{default:r(()=>e[4]||(e[4]=[u("批量删除")])),_:1})]),p("div",$,[a(C,{stripe:"",data:t.tableData,border:"",style:{width:"100%"},onSelectionChange:b},{default:r(()=>[a(d,{type:"selection",width:"55","header-align":"center",align:"center"}),a(d,{prop:"studentName",label:"学生姓名"}),a(d,{prop:"dish.name",label:"菜品名称"}),a(d,{prop:"dish.img",label:"菜品图片"},{default:r(n=>[a(v,{src:n.row.dish.img,"preview-src-list":[n.row.dish.img],fit:"cover",style:{width:"50px",height:"50px","object-fit":"cover"},"preview-teleported":""},{error:r(()=>[p("div",A,[a(N,null,{default:r(()=>[a(h(I))]),_:1})])]),_:2},1032,["src","preview-src-list"])]),_:1}),a(d,{label:"操作",width:"180"},{default:r(n=>[a(c,{type:"danger",circle:"",icon:h(q),onClick:F=>y(n.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(f(),g("div",G,[a(E,{onCurrentChange:s,background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[1]||(e[1]=n=>t.pageNum=n),total:t.total},null,8,["page-size","current-page","total"])])):V("",!0)])}}};export{le as default};
