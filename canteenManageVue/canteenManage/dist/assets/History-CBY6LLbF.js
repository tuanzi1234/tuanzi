/* empty css                *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css            *//* empty css               */import{r as g}from"./request-B1eisu_F.js";import{r as v,c as r,a as o,t as l,b as d,w as p,v as k,E as c,a1 as z,B as N,o as i,N as C,O as b,P as w,g as E,z as B,a3 as D}from"./index-BMVJ4Z_q.js";const S={style:{width:"70%",margin:"20px auto"}},P={style:{"font-size":"20px"},class:"card"},V={style:{flex:"1",padding:"5px"}},j={class:"front_card",style:{margin:"10px auto"}},H=["onClick","src"],T={style:{padding:"10px"}},$={style:{display:"flex","justify-content":"space-between"}},q={style:{"font-size":"20px"}},F={class:"line2",style:{"margin-top":"5px","line-height":"20px",height:"40px"}},I={key:0,class:"card",style:{"margin-top":"5px"}},W={__name:"History",setup(L){const t=v({dishData:[],pageNum:1,pageSize:8,total:0}),n=()=>{g.get("/history/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize}}).then(e=>{e.code==="200"?(t.dishData=e.data.list,t.total=e.data.total):c.error(e.msg)})},_=e=>{setInterval(()=>{location.href=e},300)},u=e=>{g.delete("/history/delete/"+e).then(s=>{s.code==="200"?(c.success("删除成功！"),n()):c.error(s.msg)})};return n(),(e,s)=>{const m=B,h=D,y=z,x=N;return i(),r("div",S,[o("div",P,"我的浏览记录："+l(t.total),1),o("div",V,[d(y,{gutter:10},{default:p(()=>[(i(!0),r(C,null,b(t.dishData,a=>(i(),w(h,{span:6,key:a.id},{default:p(()=>[o("div",j,[o("img",{onClick:f=>_("/front/dishDetail?id="+a.dish.id),src:a.dish.img,alt:"",style:{width:"100%",height:"130px","object-fit":"cover","border-top-left-radius":"6px","border-top-right-radius":"6px",cursor:"pointer"}},null,8,H),o("div",T,[o("div",$,[o("div",q,l(a.dish.name),1),o("div",null,[d(m,{type:"danger",plain:"",size:"small",onClick:f=>u(a.id)},{default:p(()=>s[1]||(s[1]=[E("删除")])),_:2},1032,["onClick"])])]),o("div",F,l(a.dish.content),1)])])]),_:2},1024))),128))]),_:1})]),t.total?(i(),r("div",I,[d(x,{onCurrentChange:n,background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":s[0]||(s[0]=a=>t.pageNum=a),total:t.total},null,8,["page-size","current-page","total"])])):k("",!0)])}}};export{W as default};
