/* empty css                *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as u}from"./request-NPF86asl.js";import{r as I,s as S,c as h,a as c,b as a,w as n,v as _,E as r,x as f,y as V,z,A as D,B as P,o as g,g as m,P as q,u as b,D as T,t as w,G as j,H as M,k as U,I as $}from"./index-DDdsWfNx.js";/* empty css                */const A={class:"card"},G={class:"card",style:{"margin-bottom":"10px"}},H={class:"card",style:{"margin-bottom":"10px"}},F={style:{display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%"}},J={style:{color:"red","font-weight":"bold"}},K={key:0,class:"card"},re={__name:"DishItem",setup(L){const t=I({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:5,total:0,dishName:null,content:null,ids:[],rules:{dishName:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}});S();const y=l=>{t.ids=l.map(e=>e.id)},d=()=>{u.get("/dishItem/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,dishName:t.dishName,content:t.content}}).then(l=>{var e,i;l.code==="200"?(t.tableData=((e=l.data)==null?void 0:e.list)||[],t.total=(i=l.data)==null?void 0:i.total):r.error(l.msg)})};d();const x=l=>{f.confirm("是否删除该学生点单信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(e=>{u.delete(`/dishItem/delete/${l.id}`).then(i=>{i.code==="200"?(r.success("删除成功"),d()):r.error(i.msg)}).catch(i=>{r.error(i)})})},N=()=>{if(!t.ids.length){r.warning("请选择要删除的学生点单信息");return}f.confirm("是否删除该学生点单信息?（删除后将无法恢复）","删除确认",{type:"warning"}).then(l=>{u.delete("/dishItem/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(r.success("删除成功"),d()):r.error(e.msg)}).catch(e=>{r.error(e)})})},v=()=>{t.dishName=null,t.content=null,d()};return(l,e)=>{const i=V,p=z,s=M,k=U,C=$,E=D,B=P;return g(),h("div",null,[c("div",A,[a(i,{modelValue:t.dishName,"onUpdate:modelValue":e[0]||(e[0]=o=>t.dishName=o),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入菜品名称"},null,8,["modelValue"]),a(p,{type:"info",plain:"",onClick:d},{default:n(()=>e[2]||(e[2]=[m("查询")])),_:1}),a(p,{type:"info",style:{margin:"0 10px"},plain:"",onClick:v},{default:n(()=>e[3]||(e[3]=[m("重置")])),_:1})]),c("div",G,[a(p,{type:"danger",plain:"",onClick:N},{default:n(()=>e[4]||(e[4]=[m("批量删除")])),_:1})]),c("div",H,[a(E,{stripe:"",data:t.tableData,border:"",style:{width:"100%"},onSelectionChange:y},{default:n(()=>[a(s,{type:"selection",width:"55","header-align":"center",align:"center"}),a(s,{prop:"dish.img",label:"菜品图片",width:"90px"},{default:n(o=>[o.row.dish.img?(g(),q(C,{key:0,src:o.row.dish.img,"preview-src-list":[o.row.dish.img],fit:"cover",style:{width:"50px",height:"50px","object-fit":"cover"},"preview-teleported":""},{error:n(()=>[c("div",F,[a(k,null,{default:n(()=>[a(b(T))]),_:1})])]),_:2},1032,["src","preview-src-list"])):_("",!0)]),_:1}),a(s,{prop:"dish.name",label:"菜品名称"}),a(s,{prop:"dish.price",label:"菜品价格"},{default:n(o=>[c("span",J,"￥ "+w(o.row.dish.price),1)]),_:1}),a(s,{prop:"num",label:"菜品份数"},{default:n(o=>[m(w(o.row.num)+" 份 ",1)]),_:1}),a(s,{prop:"studentName",label:"学生姓名"}),a(s,{label:"操作",width:"180"},{default:n(o=>[a(p,{type:"danger",circle:"",icon:b(j),onClick:O=>x(o.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(g(),h("div",K,[a(B,{onCurrentChange:d,background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[1]||(e[1]=o=>t.pageNum=o),total:t.total},null,8,["page-size","current-page","total"])])):_("",!0)])}}};export{re as default};
